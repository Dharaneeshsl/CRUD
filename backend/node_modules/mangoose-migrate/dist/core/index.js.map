{"version":3,"sources":["../../src/core/migration.ts"],"sourcesContent":["import { Connection } from 'mongoose';\nimport { MigrationOperation } from '../types.js';\n\nexport class Migration {\n  public readonly operations: MigrationOperation[] = [];\n\n  async up(connection: Connection): Promise<void> {\n    for (const operation of this.operations) {\n      await operation.applyUp(connection);\n    }\n  }\n\n  async down(connection: Connection): Promise<void> {\n    // apply operations in reverse order\n    for (let i = this.operations.length; i >= 0; i--) {\n      await this.operations[i].applyDown(connection);\n    }\n  }\n\n  addOperation(operation: MigrationOperation): void {\n    this.operations.push(operation);\n  }\n}\n"],"mappings":";AAGO,IAAM,YAAN,MAAgB;AAAA,EAAhB;AACL,SAAgB,aAAmC,CAAC;AAAA;AAAA,EAEpD,MAAM,GAAG,YAAuC;AAC9C,eAAW,aAAa,KAAK,YAAY;AACvC,YAAM,UAAU,QAAQ,UAAU;AAAA,IACpC;AAAA,EACF;AAAA,EAEA,MAAM,KAAK,YAAuC;AAEhD,aAAS,IAAI,KAAK,WAAW,QAAQ,KAAK,GAAG,KAAK;AAChD,YAAM,KAAK,WAAW,CAAC,EAAE,UAAU,UAAU;AAAA,IAC/C;AAAA,EACF;AAAA,EAEA,aAAa,WAAqC;AAChD,SAAK,WAAW,KAAK,SAAS;AAAA,EAChC;AACF;","names":[]}